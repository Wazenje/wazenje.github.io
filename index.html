<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VXN Solutions</title>

<style>
    body {
        margin: 0;
        background: linear-gradient(135deg, #0f172a, #1e293b);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        font-family: Arial, sans-serif;
        color: white;
        text-align: center;
    }

    h1 {
        margin-bottom: 5px;
        letter-spacing: 2px;
    }

    #score {
        margin-bottom: 10px;
        font-size: 18px;
        opacity: 0.8;
    }

    canvas {
        background: #0b1220;
        border: 2px solid #334155;
        border-radius: 10px;
        max-width: 90vw;
        max-height: 60vh;
    }

    .controls {
        margin-top: 15px;
        display: grid;
        grid-template-columns: 60px 60px 60px;
        grid-template-rows: 60px 60px;
        gap: 10px;
        justify-content: center;
    }

    button {
        background: #1e293b;
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 20px;
        cursor: pointer;
    }

    button:active {
        background: #334155;
    }

    .empty {
        visibility: hidden;
    }

    @media (min-width: 768px) {
        .controls {
            display: none;
        }
    }
</style>
</head>
<body>

<h1>VXN Solutions</h1>
<p>Coming soon...</p>
<div id="score">Score: 0</div>
<canvas id="game" width="300" height="300"></canvas>

<div class="controls">
    <div class="empty"></div>
    <button onclick="setDirection('up')">⬆️</button>
    <div class="empty"></div>
    <button onclick="setDirection('left')">⬅️</button>
    <button onclick="setDirection('down')">⬇️</button>
    <button onclick="setDirection('right')">➡️</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const gridSize = 5;              // 5x5 grid
const canvasSize = 300;
const box = canvasSize / gridSize; // automatisch juiste vakgrootte

let snake;
let direction;
let food;
let score;
let highscore = localStorage.getItem("vxn_highscore") || 0;
let gameOver = false;

function initGame() {
    snake = [{x: 2 * box, y: 2 * box}]; // start in het midden
    direction = null;
    score = 0;
    gameOver = false;
    food = randomFood();
    updateScore();
}

function randomFood() {
    let newFood;
    do {
        newFood = {
            x: Math.floor(Math.random() * gridSize) * box,
            y: Math.floor(Math.random() * gridSize) * box
        };
    } while (snake && snake.some(segment => segment.x === newFood.x && segment.y === newFood.y));
    return newFood;
}

function updateScore() {
    document.getElementById("score").innerText =
        "Score: " + score + " | Highscore: " + highscore;
}

document.addEventListener("keydown", e => {
    if (e.key === "ArrowUp" && direction !== "down") direction = "up";
    if (e.key === "ArrowDown" && direction !== "up") direction = "down";
    if (e.key === "ArrowLeft" && direction !== "right") direction = "left";
    if (e.key === "ArrowRight" && direction !== "left") direction = "right";
});

function setDirection(dir) {
    if (dir === "up" && direction !== "down") direction = "up";
    if (dir === "down" && direction !== "up") direction = "down";
    if (dir === "left" && direction !== "right") direction = "left";
    if (dir === "right" && direction !== "left") direction = "right";
}

function draw() {
    if (gameOver) return;

    ctx.fillStyle = "#0b1220";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    // optioneel grid lijnen
    ctx.strokeStyle = "#1e293b";
    for (let i = 0; i <= gridSize; i++) {
        ctx.beginPath();
        ctx.moveTo(i * box, 0);
        ctx.lineTo(i * box, canvasSize);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(0, i * box);
        ctx.lineTo(canvasSize, i * box);
        ctx.stroke();
    }

    // Snake
    ctx.fillStyle = "#22c55e";
    snake.forEach(segment => {
        ctx.fillRect(segment.x, segment.y, box, box);
    });

    // Food
    ctx.fillStyle = "#ef4444";
    ctx.fillRect(food.x, food.y, box, box);

    let headX = snake[0].x;
    let headY = snake[0].y;

    if (direction === "up") headY -= box;
    if (direction === "down") headY += box;
    if (direction === "left") headX -= box;
    if (direction === "right") headX += box;

    if (
        headX < 0 || headY < 0 ||
        headX >= canvasSize || headY >= canvasSize ||
        snake.some(segment => segment.x === headX && segment.y === headY)
    ) {
        gameOver = true;

        if (score > highscore) {
            highscore = score;
            localStorage.setItem("vxn_highscore", highscore);
        }

        setTimeout(() => {
            alert("Game Over! Score: " + score);
            initGame();
        }, 100);

        return;
    }

    let newHead = {x: headX, y: headY};

    if (headX === food.x && headY === food.y) {
        score++;
        food = randomFood();
        updateScore();
    } else {
        snake.pop();
    }

    snake.unshift(newHead);
}

initGame();

setInterval(draw, 600);
</script>

</body>
</html>
